

task clearData(type: Exec) {
    def clearDataCommand = ['adb', 'shell', 'pm', 'clear', 'security.pEp.debug']
    commandLine clearDataCommand
}

task addAccounts(type: Exec) {
    dependsOn clearData
    def addAccount = ['adb', 'shell', 'am', 'instrument', '-w', '-r' ,'-e', 'debug', 'false', '-e',
                            'class', 'com.fsck.k9.pEp.ui.navigationdrawer.AddAccountsDrawerLayoutTest#addAccounts',
                            'com.fsck.k9.pEp.ui.activities.test/androidx.test.runner.AndroidJUnitRunner']
    commandLine addAccount
}

task mainTestNavDrawer(type: Exec) {
    dependsOn addAccounts

    def mainTestCommand = ['adb', 'shell', 'am', 'instrument', '-w', '-r' ,'-e', 'debug', 'false', '-e',
                           'class', 'com.fsck.k9.pEp.ui.navigationdrawer.DrawerLayoutTest',
                           'com.fsck.k9.pEp.ui.activities.test/androidx.test.runner.AndroidJUnitRunner']
    commandLine mainTestCommand
}


task navigationDrawerTest() {
    dependsOn mainTestNavDrawer
}
