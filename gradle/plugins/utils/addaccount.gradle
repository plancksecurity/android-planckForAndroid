task installApkAddAccount(type: Exec, dependsOn: 'uninstallAll') {
    def command = ['../gradlew', 'installWithkeysyncPlayStoreDebug']
    commandLine command
}

task installTestAddAccount(type: Exec, dependsOn: 'installApkAddAccount') {
    def command = ['../gradlew', 'installWithkeysyncPlayStoreDebugAndroidTest']
    commandLine command
}

task setAccount(type: Exec, dependsOn: 'installTestAddAccount') {
    def command = ['adb', 'shell', 'am', 'instrument', '-w', '-r', '-e', 'debug', 'false', '-e',
                   'class', 'com.fsck.k9.helper.SetupAccountsTask#setupAccounts',
                   'com.fsck.k9.pEp.ui.activities.test/androidx.test.runner.AndroidJUnitRunner']
    commandLine command
}

task setupAccount() {
    dependsOn setAccount
}
